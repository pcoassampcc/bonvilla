<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PDFToolsHub - All-in-One PDF Processing Platform</title>
    <meta name="description" content="Free online PDF tools - merge, split, compress, convert, and edit PDF files easily. No registration required.">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf-lib/1.17.1/pdf-lib.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/FileSaver.js/2.0.5/FileSaver.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary-color: #e74c3c;
            --primary-hover: #c0392b;
            --secondary-color: #3498db;
            --success-color: #27ae60;
            --warning-color: #f39c12;
            --danger-color: #e74c3c;
            --dark-color: #2c3e50;
            --light-color: #ecf0f1;
            --white: #ffffff;
            --text-primary: #2c3e50;
            --text-secondary: #7f8c8d;
            --border-color: #bdc3c7;
            --shadow: 0 2px 10px rgba(0,0,0,0.1);
            --border-radius: 8px;
            --transition: all 0.3s ease;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: var(--text-primary);
            background-color: #f8f9fa;
        }

        /* Header Styles */
        .header {
            background: linear-gradient(135deg, var(--primary-color), var(--primary-hover));
            color: var(--white);
            padding: 1rem 0;
            box-shadow: var(--shadow);
            position: sticky;
            top: 0;
            z-index: 1000;
        }

        .nav-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 2rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            font-size: 1.8rem;
            font-weight: bold;
            display: flex;
            align-items: center;
        }

        .logo i {
            margin-right: 0.5rem;
            font-size: 2rem;
        }

        .nav-menu {
            display: flex;
            list-style: none;
            gap: 2rem;
        }

        .nav-menu a {
            color: var(--white);
            text-decoration: none;
            transition: var(--transition);
            padding: 0.5rem 1rem;
            border-radius: var(--border-radius);
        }

        .nav-menu a:hover {
            background-color: rgba(255,255,255,0.1);
        }

        .auth-buttons {
            display: flex;
            gap: 1rem;
        }

        .btn {
            padding: 0.5rem 1.5rem;
            border: none;
            border-radius: var(--border-radius);
            cursor: pointer;
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            transition: var(--transition);
            font-weight: 500;
            font-size: 0.9rem;
        }

        .btn-outline {
            background: transparent;
            color: var(--white);
            border: 2px solid var(--white);
        }

        .btn-outline:hover {
            background: var(--white);
            color: var(--primary-color);
        }

        .btn-white {
            background: var(--white);
            color: var(--primary-color);
        }

        .btn-white:hover {
            background: var(--light-color);
        }

        .btn-primary {
            background: var(--primary-color);
            color: var(--white);
        }

        .btn-primary:hover {
            background: var(--primary-hover);
        }

        /* Hero Section */
        .hero {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: var(--white);
            padding: 4rem 0;
            text-align: center;
        }

        .hero-content {
            max-width: 800px;
            margin: 0 auto;
            padding: 0 2rem;
        }

        .hero h1 {
            font-size: 3rem;
            margin-bottom: 1rem;
            font-weight: 700;
        }

        .hero p {
            font-size: 1.2rem;
            margin-bottom: 2rem;
            opacity: 0.9;
        }

        .search-container {
            max-width: 500px;
            margin: 0 auto;
            position: relative;
        }

        .search-box {
            width: 100%;
            padding: 1rem 1rem 1rem 3rem;
            border: none;
            border-radius: 50px;
            font-size: 1rem;
            box-shadow: var(--shadow);
            outline: none;
        }

        .search-icon {
            position: absolute;
            left: 1rem;
            top: 50%;
            transform: translateY(-50%);
            color: var(--text-secondary);
        }

        /* Tools Grid */
        .tools-section {
            padding: 4rem 0;
            max-width: 1200px;
            margin: 0 auto;
            padding-left: 2rem;
            padding-right: 2rem;
        }

        .section-title {
            text-align: center;
            font-size: 2.5rem;
            margin-bottom: 3rem;
            color: var(--text-primary);
        }

        .tools-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 2rem;
            margin-bottom: 3rem;
        }

        .tool-card {
            background: var(--white);
            border-radius: var(--border-radius);
            padding: 2rem;
            text-align: center;
            box-shadow: var(--shadow);
            transition: var(--transition);
            cursor: pointer;
            border: 2px solid transparent;
        }

        .tool-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0,0,0,0.15);
            border-color: var(--primary-color);
        }

        .tool-icon {
            font-size: 3rem;
            color: var(--primary-color);
            margin-bottom: 1rem;
        }

        .tool-card h3 {
            font-size: 1.3rem;
            margin-bottom: 0.5rem;
            color: var(--text-primary);
        }

        .tool-card p {
            color: var(--text-secondary);
            font-size: 0.9rem;
        }

        /* Modal Styles */
        .modal {
            display: none;
            position: fixed;
            z-index: 2000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.5);
            backdrop-filter: blur(5px);
        }

        .modal-content {
            background-color: var(--white);
            margin: 5% auto;
            padding: 0;
            border-radius: var(--border-radius);
            width: 90%;
            max-width: 800px;
            max-height: 80vh;
            overflow-y: auto;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            animation: modalSlideIn 0.3s ease;
        }

        @keyframes modalSlideIn {
            from { opacity: 0; transform: translateY(-50px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .modal-header {
            background: linear-gradient(135deg, var(--primary-color), var(--primary-hover));
            color: var(--white);
            padding: 1.5rem 2rem;
            border-radius: var(--border-radius) var(--border-radius) 0 0;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .modal-header h2 {
            margin: 0;
            font-size: 1.5rem;
        }

        .close {
            background: none;
            border: none;
            color: var(--white);
            font-size: 1.5rem;
            cursor: pointer;
            padding: 0.5rem;
            border-radius: 50%;
            transition: var(--transition);
        }

        .close:hover {
            background-color: rgba(255,255,255,0.1);
        }

        .modal-body {
            padding: 2rem;
        }

        /* File Upload Area */
        .upload-area {
            border: 3px dashed var(--border-color);
            border-radius: var(--border-radius);
            padding: 3rem 2rem;
            text-align: center;
            margin-bottom: 2rem;
            transition: var(--transition);
            background: #fafafa;
        }

        .upload-area.dragover {
            border-color: var(--primary-color);
            background-color: rgba(231, 76, 60, 0.05);
        }

        .upload-icon {
            font-size: 4rem;
            color: var(--text-secondary);
            margin-bottom: 1rem;
        }

        .upload-text {
            font-size: 1.1rem;
            color: var(--text-primary);
            margin-bottom: 0.5rem;
        }

        .upload-subtext {
            color: var(--text-secondary);
            font-size: 0.9rem;
            margin-bottom: 1.5rem;
        }

        .upload-options {
            display: flex;
            justify-content: center;
            gap: 1rem;
            flex-wrap: wrap;
        }

        .btn-upload {
            background: var(--primary-color);
            color: var(--white);
            padding: 0.75rem 1.5rem;
            border: none;
            border-radius: var(--border-radius);
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            transition: var(--transition);
        }

        .btn-upload:hover {
            background: var(--primary-hover);
        }

        .btn-cloud {
            background: var(--secondary-color);
            color: var(--white);
        }

        .btn-cloud:hover {
            background: #2980b9;
        }

        /* File List */
        .file-list {
            margin-top: 2rem;
        }

        .file-item {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 1rem;
            background: var(--light-color);
            border-radius: var(--border-radius);
            margin-bottom: 1rem;
        }

        .file-info {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .file-icon {
            font-size: 2rem;
            color: var(--primary-color);
        }

        .file-details h4 {
            margin: 0;
            color: var(--text-primary);
        }

        .file-details p {
            margin: 0;
            color: var(--text-secondary);
            font-size: 0.9rem;
        }

        .file-actions {
            display: flex;
            gap: 0.5rem;
        }

        .btn-sm {
            padding: 0.5rem 1rem;
            font-size: 0.8rem;
        }

        .btn-danger {
            background: var(--danger-color);
            color: var(--white);
        }

        .btn-danger:hover {
            background: #c0392b;
        }

        /* Progress Bar */
        .progress-container {
            margin: 2rem 0;
            display: none;
        }

        .progress-bar {
            width: 100%;
            height: 8px;
            background: var(--light-color);
            border-radius: 4px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--primary-color), var(--success-color));
            width: 0%;
            transition: width 0.3s ease;
        }

        .progress-text {
            text-align: center;
            margin-top: 0.5rem;
            color: var(--text-secondary);
        }

        /* Process Button */
        .process-section {
            text-align: center;
            margin-top: 2rem;
            padding-top: 2rem;
            border-top: 1px solid var(--border-color);
        }

        .btn-process {
            background: var(--success-color);
            color: var(--white);
            padding: 1rem 2rem;
            font-size: 1.1rem;
            border: none;
            border-radius: var(--border-radius);
            cursor: pointer;
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            transition: var(--transition);
        }

        .btn-process:hover {
            background: #229954;
        }

        .btn-process:disabled {
            background: var(--text-secondary);
            cursor: not-allowed;
        }

        /* Features Section */
        .features {
            background: var(--white);
            padding: 4rem 0;
        }

        .features-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 2rem;
        }

        .features-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 2rem;
            margin-top: 3rem;
        }

        .feature-card {
            text-align: center;
            padding: 2rem;
        }

        .feature-icon {
            font-size: 3rem;
            color: var(--primary-color);
            margin-bottom: 1rem;
        }

        .feature-card h3 {
            margin-bottom: 1rem;
            color: var(--text-primary);
        }

        .feature-card p {
            color: var(--text-secondary);
        }

        /* Footer */
        .footer {
            background: var(--dark-color);
            color: var(--white);
            padding: 3rem 0 1rem;
        }

        .footer-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 2rem;
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 2rem;
        }

        .footer-section h3 {
            margin-bottom: 1rem;
            color: var(--white);
        }

        .footer-section ul {
            list-style: none;
        }

        .footer-section ul li {
            margin-bottom: 0.5rem;
        }

        .footer-section a {
            color: #bdc3c7;
            text-decoration: none;
            transition: var(--transition);
        }

        .footer-section a:hover {
            color: var(--white);
        }

        .footer-bottom {
            text-align: center;
            padding-top: 2rem;
            margin-top: 2rem;
            border-top: 1px solid #34495e;
            color: #bdc3c7;
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .nav-menu {
                display: none;
            }

            .hero h1 {
                font-size: 2rem;
            }

            .hero p {
                font-size: 1rem;
            }

            .tools-grid {
                grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
                gap: 1rem;
            }

            .modal-content {
                width: 95%;
                margin: 2% auto;
            }

            .upload-options {
                flex-direction: column;
                align-items: center;
            }

            .file-item {
                flex-direction: column;
                gap: 1rem;
                text-align: center;
            }

            .file-actions {
                width: 100%;
                justify-content: center;
            }
        }

        /* Animations */
        .fade-in {
            animation: fadeIn 0.6s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .success-message {
            background: var(--success-color);
            color: var(--white);
            padding: 1rem;
            border-radius: var(--border-radius);
            margin: 1rem 0;
            text-align: center;
            animation: slideDown 0.3s ease;
        }

        @keyframes slideDown {
            from { opacity: 0; transform: translateY(-20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 2px solid transparent;
            border-top: 2px solid currentColor;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        /* Tool-specific styles */
        .tool-options {
            margin: 2rem 0;
            padding: 1.5rem;
            background: #f8f9fa;
            border-radius: var(--border-radius);
        }

        .option-group {
            margin-bottom: 1.5rem;
        }

        .option-group label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 500;
            color: var(--text-primary);
        }

        .option-group select,
        .option-group input {
            width: 100%;
            padding: 0.75rem;
            border: 1px solid var(--border-color);
            border-radius: var(--border-radius);
            font-size: 1rem;
        }

        .option-group select:focus,
        .option-group input:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 0 2px rgba(231, 76, 60, 0.1);
        }

        .checkbox-group {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .checkbox-group input[type="checkbox"] {
            width: auto;
        }

        .page-range-selector {
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }

        .page-range-inputs {
            display: flex;
            gap: 1rem;
            align-items: center;
        }

        .page-range-inputs input {
            flex: 1;
        }

        .page-range-preview {
            margin-top: 1rem;
            padding: 1rem;
            background: #f0f0f0;
            border-radius: var(--border-radius);
            font-size: 0.9rem;
        }

        .download-area {
            margin-top: 2rem;
            padding: 1.5rem;
            background: #f8f9fa;
            border-radius: var(--border-radius);
            text-align: center;
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="nav-container">
            <div class="logo">
                <i class="fas fa-file-pdf"></i>
                PDFToolsHub
            </div>
            <nav>
                <ul class="nav-menu">
                    <li><a href="#home">Home</a></li>
                    <li><a href="#tools">Tools</a></li>
                    <li><a href="#features">Features</a></li>
                    <li><a href="#pricing">Pricing</a></li>
                    <li><a href="#contact">Contact</a></li>
                </ul>
            </nav>
            <div class="auth-buttons">
                <a href="#" class="btn btn-outline" onclick="openAuthModal('login')">Login</a>
                <a href="#" class="btn btn-white" onclick="openAuthModal('signup')">Sign Up</a>
            </div>
        </div>
    </header>

    <!-- Hero Section -->
    <section class="hero" id="home">
        <div class="hero-content">
            <h1>All-in-One PDF Tools</h1>
            <p>Process, convert, and manage your PDF files with our comprehensive suite of online tools. Fast, secure, and free to use.</p>
            <div class="search-container">
                <i class="fas fa-search search-icon"></i>
                <input type="text" class="search-box" placeholder="Search for PDF tools..." id="searchBox">
            </div>
        </div>
    </section>

    <!-- Tools Section -->
    <section class="tools-section" id="tools">
        <h2 class="section-title">Choose Your PDF Tool</h2>
        <div class="tools-grid" id="toolsGrid">
            <!-- Tools will be populated by JavaScript -->
        </div>
    </section>

    <!-- Features Section -->
    <section class="features" id="features">
        <div class="features-container">
            <h2 class="section-title">Why Choose PDFToolsHub?</h2>
            <div class="features-grid">
                <div class="feature-card">
                    <div class="feature-icon">
                        <i class="fas fa-shield-alt"></i>
                    </div>
                    <h3>100% Secure</h3>
                    <p>Your files are processed securely and automatically deleted after processing. We never store your documents.</p>
                </div>
                <div class="feature-card">
                    <div class="feature-icon">
                        <i class="fas fa-bolt"></i>
                    </div>
                    <h3>Lightning Fast</h3>
                    <p>Advanced processing algorithms ensure your PDF operations complete in seconds, not minutes.</p>
                </div>
                <div class="feature-card">
                    <div class="feature-icon">
                        <i class="fas fa-mobile-alt"></i>
                    </div>
                    <h3>Any Device</h3>
                    <p>Works perfectly on desktop, tablet, and mobile devices. No software installation required.</p>
                </div>
                <div class="feature-card">
                    <div class="feature-icon">
                        <i class="fas fa-cloud"></i>
                    </div>
                    <h3>Cloud Integration</h3>
                    <p>Upload files from Google Drive, Dropbox, or your device. Save results back to the cloud.</p>
                </div>
                <div class="feature-card">
                    <div class="feature-icon">
                        <i class="fas fa-magic"></i>
                    </div>
                    <h3>AI-Powered</h3>
                    <p>Smart processing with AI-enhanced OCR and automatic optimization for best results.</p>
                </div>
                <div class="feature-card">
                    <div class="feature-icon">
                        <i class="fas fa-infinity"></i>
                    </div>
                    <h3>Unlimited Usage</h3>
                    <p>Process as many files as you need. No daily limits or usage restrictions.</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="footer">
        <div class="footer-container">
            <div class="footer-section">
                <h3>PDF Tools</h3>
                <ul>
                    <li><a href="#">Merge PDF</a></li>
                    <li><a href="#">Split PDF</a></li>
                    <li><a href="#">Compress PDF</a></li>
                    <li><a href="#">Convert PDF</a></li>
                    <li><a href="#">Edit PDF</a></li>
                </ul>
            </div>
            <div class="footer-section">
                <h3>Company</h3>
                <ul>
                    <li><a href="#">About Us</a></li>
                    <li><a href="#">Privacy Policy</a></li>
                    <li><a href="#">Terms of Service</a></li>
                    <li><a href="#">Contact</a></li>
                    <li><a href="#">API</a></li>
                </ul>
            </div>
            <div class="footer-section">
                <h3>Support</h3>
                <ul>
                    <li><a href="#">Help Center</a></li>
                    <li><a href="#">FAQ</a></li>
                    <li><a href="#">Blog</a></li>
                    <li><a href="#">Tutorials</a></li>
                    <li><a href="#">Status</a></li>
                </ul>
            </div>
            <div class="footer-section">
                <h3>Follow Us</h3>
                <ul>
                    <li><a href="#"><i class="fab fa-twitter"></i> Twitter</a></li>
                    <li><a href="#"><i class="fab fa-facebook"></i> Facebook</a></li>
                    <li><a href="#"><i class="fab fa-linkedin"></i> LinkedIn</a></li>
                    <li><a href="#"><i class="fab fa-instagram"></i> Instagram</a></li>
                </ul>
            </div>
        </div>
        <div class="footer-bottom">
            <p>&copy; 2025 PDFToolsHub. All rights reserved. Made with ❤️ for PDF enthusiasts.</p>
        </div>
    </footer>

    <!-- Tool Modal -->
    <div id="toolModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="modalTitle">PDF Tool</h2>
                <button class="close" onclick="closeModal('toolModal')">&times;</button>
            </div>
            <div class="modal-body">
                <div class="upload-area" id="uploadArea">
                    <div class="upload-icon">
                        <i class="fas fa-cloud-upload-alt"></i>
                    </div>
                    <div class="upload-text">Drop your PDF files here</div>
                    <div class="upload-subtext">or click to browse from your device</div>
                    <div class="upload-options">
                        <button class="btn-upload" onclick="document.getElementById('fileInput').click()">
                            <i class="fas fa-desktop"></i>
                            From Device
                        </button>
                        <button class="btn-upload btn-cloud" onclick="uploadFromCloud('google')">
                            <i class="fab fa-google-drive"></i>
                            Google Drive
                        </button>
                        <button class="btn-upload btn-cloud" onclick="uploadFromCloud('dropbox')">
                            <i class="fab fa-dropbox"></i>
                            Dropbox
                        </button>
                    </div>
                    <input type="file" id="fileInput" multiple accept=".pdf" style="display: none;">
                </div>

                <div class="tool-options" id="toolOptions" style="display: none;">
                    <!-- Tool-specific options will be populated here -->
                </div>

                <div class="file-list" id="fileList" style="display: none;">
                    <h3>Selected Files</h3>
                    <div id="fileItems"></div>
                </div>

                <div class="progress-container" id="progressContainer">
                    <div class="progress-bar">
                        <div class="progress-fill" id="progressFill"></div>
                    </div>
                    <div class="progress-text" id="progressText">Processing...</div>
                </div>

                <div class="process-section">
                    <button class="btn-process" id="processBtn" onclick="processFiles()" disabled>
                        <i class="fas fa-cogs"></i>
                        <span id="processBtnText">Select Files to Continue</span>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Auth Modal -->
    <div id="authModal" class="modal">
        <div class="modal-content" style="max-width: 400px;">
            <div class="modal-header">
                <h2 id="authModalTitle">Login</h2>
                <button class="close" onclick="closeModal('authModal')">&times;</button>
            </div>
            <div class="modal-body">
                <form id="authForm">
                    <div class="option-group">
                        <label for="email">Email</label>
                        <input type="email" id="email" required>
                    </div>
                    <div class="option-group">
                        <label for="password">Password</label>
                        <input type="password" id="password" required>
                    </div>
                    <div class="option-group" id="confirmPasswordGroup" style="display: none;">
                        <label for="confirmPassword">Confirm Password</label>
                        <input type="password" id="confirmPassword">
                    </div>
                    <div class="checkbox-group" style="margin-bottom: 1.5rem;">
                        <input type="checkbox" id="rememberMe">
                        <label for="rememberMe">Remember me</label>
                    </div>
                    <button type="submit" class="btn btn-primary" style="width: 100%; margin-bottom: 1rem;">
                        <span id="authSubmitText">Login</span>
                    </button>
                    <div style="text-align: center;">
                        <a href="#" onclick="toggleAuthMode()" id="authToggleLink">Don't have an account? Sign up</a>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <script>
        // PDF Tools Data
        const pdfTools = [
            {
                id: 'merge-pdf',
                title: 'Merge PDF',
                description: 'Combine multiple PDF files into one document',
                icon: 'fas fa-object-group',
                category: 'organize',
                options: {
                    sortOrder: ['original', 'alphabetical', 'custom'],
                    bookmarks: true
                }
            },
            {
                id: 'split-pdf',
                title: 'Split PDF',
                description: 'Extract pages or split PDF into multiple files',
                icon: 'fas fa-cut',
                category: 'organize',
                options: {
                    splitMode: ['pages', 'range', 'size'],
                    pageRange: '',
                    outputFormat: 'individual'
                }
            },
            {
                id: 'compress-pdf',
                title: 'Compress PDF',
                description: 'Reduce PDF file size while maintaining quality',
                icon: 'fas fa-compress-alt',
                category: 'optimize',
                options: {
                    compressionLevel: ['low', 'medium', 'high', 'extreme'],
                    quality: 85
                }
            },
            {
                id: 'pdf-to-word',
                title: 'PDF to Word',
                description: 'Convert PDF documents to editable Word files',
                icon: 'fas fa-file-word',
                category: 'convert',
                options: {
                    outputFormat: ['docx', 'doc'],
                    ocr: true,
                    layout: 'preserve'
                }
            },
            {
                id: 'pdf-to-excel',
                title: 'PDF to Excel',
                description: 'Extract tables and data from PDF to Excel',
                icon: 'fas fa-file-excel',
                category: 'convert',
                options: {
                    outputFormat: ['xlsx', 'xls'],
                    tableDetection: 'auto',
                    multipleSheets: true
                }
            },
            {
                id: 'pdf-to-ppt',
                title: 'PDF to PowerPoint',
                description: 'Convert PDF pages to PowerPoint slides',
                icon: 'fas fa-file-powerpoint',
                category: 'convert',
                options: {
                    outputFormat: ['pptx', 'ppt'],
                    slideLayout: 'auto',
                    imageQuality: 'high'
                }
            },
            {
                id: 'pdf-to-jpg',
                title: 'PDF to JPG',
                description: 'Convert PDF pages to high-quality images',
                icon: 'fas fa-file-image',
                category: 'convert',
                options: {
                    imageFormat: ['jpg', 'png', 'gif', 'bmp'],
                    resolution: ['150', '300', '600', '1200'],
                    quality: 95
                }
            },
            {
                id: 'word-to-pdf',
                title: 'Word to PDF',
                description: 'Convert Word documents to PDF format',
                icon: 'fas fa-file-import',
                category: 'convert',
                acceptedTypes: ['.doc', '.docx'],
                options: {
                    orientation: ['portrait', 'landscape'],
                    margins: 'normal',
                    quality: 'high'
                }
            },
            {
                id: 'excel-to-pdf',
                title: 'Excel to PDF',
                description: 'Convert Excel spreadsheets to PDF',
                icon: 'fas fa-table',
                category: 'convert',
                acceptedTypes: ['.xls', '.xlsx'],
                options: {
                    worksheets: 'all',
                    scaling: 'fit-to-page',
                    orientation: 'auto'
                }
            },
            {
                id: 'ppt-to-pdf',
                title: 'PowerPoint to PDF',
                description: 'Convert presentations to PDF format',
                icon: 'fas fa-file-export',
                category: 'convert',
                acceptedTypes: ['.ppt', '.pptx'],
                options: {
                    handouts: false,
                    notesPages: false,
                    quality: 'high'
                }
            },
            {
                id: 'jpg-to-pdf',
                title: 'JPG to PDF',
                description: 'Create PDF from images and photos',
                icon: 'fas fa-images',
                category: 'convert',
                acceptedTypes: ['.jpg', '.jpeg', '.png', '.gif', '.bmp'],
                options: {
                    pageSize: 'auto',
                    orientation: 'auto',
                    margin: 'none'
                }
            },
            {
                id: 'rotate-pdf',
                title: 'Rotate PDF',
                description: 'Rotate PDF pages to correct orientation',
                icon: 'fas fa-redo-alt',
                category: 'edit',
                options: {
                    rotation: ['90', '180', '270'],
                    pageRange: 'all',
                    direction: 'clockwise'
                }
            },
            {
                id: 'organize-pdf',
                title: 'Organize PDF',
                description: 'Reorder, delete, and arrange PDF pages',
                icon: 'fas fa-sort',
                category: 'organize',
                options: {
                    action: ['reorder', 'delete', 'duplicate'],
                    pageSelection: 'custom'
                }
            },
            {
                id: 'protect-pdf',
                title: 'Protect PDF',
                description: 'Add password protection to PDF files',
                icon: 'fas fa-lock',
                category: 'security',
                options: {
                    userPassword: '',
                    ownerPassword: '',
                    permissions: {
                        printing: true,
                        copying: false,
                        editing: false,
                        commenting: true
                    },
                    encryption: '256-bit'
                }
            },
            {
                id: 'unlock-pdf',
                title: 'Unlock PDF',
                description: 'Remove password protection from PDF files',
                icon: 'fas fa-unlock',
                category: 'security',
                options: {
                    password: '',
                    removeRestrictions: true
                }
            },
            {
                id: 'edit-pdf',
                title: 'Edit PDF',
                description: 'Add text, images, and annotations to PDF',
                icon: 'fas fa-edit',
                category: 'edit',
                options: {
                    editMode: ['text', 'image', 'annotation'],
                    font: 'Arial',
                    fontSize: 12,
                    color: '#000000'
                }
            },
            {
                id: 'sign-pdf',
                title: 'Sign PDF',
                description: 'Add digital signatures to PDF documents',
                icon: 'fas fa-signature',
                category: 'edit',
                options: {
                    signatureType: ['draw', 'type', 'upload'],
                    position: 'custom',
                    fontSize: 14
                }
            },
            {
                id: 'watermark-pdf',
                title: 'Watermark PDF',
                description: 'Add text or image watermarks to PDF',
                icon: 'fas fa-tint',
                category: 'edit',
                options: {
                    watermarkType: ['text', 'image'],
                    text: '',
                    opacity: 50,
                    position: 'center',
                    rotation: 0
                }
            },
            {
                id: 'ocr-pdf',
                title: 'OCR PDF',
                description: 'Extract text from scanned PDF documents',
                icon: 'fas fa-text-width',
                category: 'convert',
                options: {
                    language: ['english', 'spanish', 'french', 'german', 'chinese'],
                    outputFormat: ['searchable-pdf', 'text'],
                    accuracy: 'high'
                }
            }
        ];

        // Global Variables
        let currentTool = null;
        let selectedFiles = [];
        let isProcessing = false;
        let currentUser = null;
        let processedPDF = null;

        // Initialize the application
        document.addEventListener('DOMContentLoaded', function() {
            renderTools();
            setupEventListeners();
            loadUserSession();
        });

        // Render PDF tools
        function renderTools(toolsToRender = pdfTools) {
            const toolsGrid = document.getElementById('toolsGrid');
            toolsGrid.innerHTML = '';

            toolsToRender.forEach(tool => {
                const toolCard = document.createElement('div');
                toolCard.className = 'tool-card fade-in';
                toolCard.innerHTML = `
                    <div class="tool-icon">
                        <i class="${tool.icon}"></i>
                    </div>
                    <h3>${tool.title}</h3>
                    <p>${tool.description}</p>
                `;
                toolCard.onclick = () => openToolModal(tool);
                toolsGrid.appendChild(toolCard);
            });
        }

        // Setup event listeners
        function setupEventListeners() {
            // Search functionality
            const searchBox = document.getElementById('searchBox');
            searchBox.addEventListener('input', handleSearch);

            // File input
            const fileInput = document.getElementById('fileInput');
            fileInput.addEventListener('change', handleFileSelect);

            // Drag and drop
            const uploadArea = document.getElementById('uploadArea');
            uploadArea.addEventListener('dragover', handleDragOver);
            uploadArea.addEventListener('dragleave', handleDragLeave);
            uploadArea.addEventListener('drop', handleDrop);
            uploadArea.addEventListener('click', () => {
                if (currentTool && !currentTool.acceptedTypes) {
                    fileInput.accept = '.pdf';
                } else if (currentTool && currentTool.acceptedTypes) {
                    fileInput.accept = currentTool.acceptedTypes.join(',');
                }
                fileInput.click();
            });

            // Close modals when clicking outside
            window.addEventListener('click', function(event) {
                const modals = document.querySelectorAll('.modal');
                modals.forEach(modal => {
                    if (event.target === modal) {
                        modal.style.display = 'none';
                    }
                });
            });

            // Auth form
            const authForm = document.getElementById('authForm');
            authForm.addEventListener('submit', handleAuth);
        }

        // Search functionality
        function handleSearch(event) {
            const searchTerm = event.target.value.toLowerCase();
            const filteredTools = pdfTools.filter(tool => 
                tool.title.toLowerCase().includes(searchTerm) ||
                tool.description.toLowerCase().includes(searchTerm) ||
                tool.category.toLowerCase().includes(searchTerm)
            );
            renderTools(filteredTools);
        }

        // Open tool modal
        function openToolModal(tool) {
            currentTool = tool;
            selectedFiles = [];
            
            const modal = document.getElementById('toolModal');
            const modalTitle = document.getElementById('modalTitle');
            const fileInput = document.getElementById('fileInput');
            
            modalTitle.textContent = tool.title;
            
            // Set accepted file types
            if (tool.acceptedTypes) {
                fileInput.accept = tool.acceptedTypes.join(',');
            } else {
                fileInput.accept = '.pdf';
            }
            
            // Reset UI
            resetToolModal();
            
            // Generate tool options
            generateToolOptions(tool);
            
            modal.style.display = 'block';
        }

        // Generate tool-specific options
        function generateToolOptions(tool) {
            const toolOptions = document.getElementById('toolOptions');
            const options = tool.options;
            
            if (!options) {
                toolOptions.style.display = 'none';
                return;
            }
            
            toolOptions.style.display = 'block';
            toolOptions.innerHTML = '<h3>Options</h3>';
            
            Object.keys(options).forEach(optionKey => {
                const option = options[optionKey];
                const optionGroup = document.createElement('div');
                optionGroup.className = 'option-group';
                
                if (Array.isArray(option)) {
                    // Dropdown options
                    optionGroup.innerHTML = `
                        <label for="${optionKey}">${formatLabel(optionKey)}</label>
                        <select id="${optionKey}" name="${optionKey}">
                            ${option.map(value => `<option value="${value}">${formatLabel(value)}</option>`).join('')}
                        </select>
                    `;
                } else if (typeof option === 'boolean') {
                    // Checkbox options
                    optionGroup.innerHTML = `
                        <div class="checkbox-group">
                            <input type="checkbox" id="${optionKey}" name="${optionKey}" ${option ? 'checked' : ''}>
                            <label for="${optionKey}">${formatLabel(optionKey)}</label>
                        </div>
                    `;
                } else if (typeof option === 'number') {
                    // Number input
                    optionGroup.innerHTML = `
                        <label for="${optionKey}">${formatLabel(optionKey)}</label>
                        <input type="number" id="${optionKey}" name="${optionKey}" value="${option}" min="0" max="100">
                    `;
                } else if (typeof option === 'string' && optionKey === 'pageRange') {
                    // Special case for page range input
                    optionGroup.innerHTML = `
                        <label for="${optionKey}">${formatLabel(optionKey)}</label>
                        <input type="text" id="${optionKey}" name="${optionKey}" value="${option}" placeholder="e.g. 1-5, 8, 11-13">
                        <div class="page-range-preview" id="pageRangePreview">All pages will be processed</div>
                    `;
                    
                    // Add event listener for page range preview
                    document.getElementById(optionKey).addEventListener('input', updatePageRangePreview);
                } else if (typeof option === 'string') {
                    // Text input
                    optionGroup.innerHTML = `
                        <label for="${optionKey}">${formatLabel(optionKey)}</label>
                        <input type="text" id="${optionKey}" name="${optionKey}" value="${option}" placeholder="Enter ${formatLabel(optionKey).toLowerCase()}">
                    `;
                } else if (typeof option === 'object') {
                    // Complex options (like permissions)
                    optionGroup.innerHTML = `<label>${formatLabel(optionKey)}</label>`;
                    Object.keys(option).forEach(subKey => {
                        const subOption = option[subKey];
                        optionGroup.innerHTML += `
                            <div class="checkbox-group" style="margin-left: 1rem;">
                                <input type="checkbox" id="${optionKey}_${subKey}" name="${optionKey}_${subKey}" ${subOption ? 'checked' : ''}>
                                <label for="${optionKey}_${subKey}">${formatLabel(subKey)}</label>
                            </div>
                        `;
                    });
                }
                
                toolOptions.appendChild(optionGroup);
            });
        }

        // Update page range preview
        function updatePageRangePreview() {
            const pageRangeInput = document.getElementById('pageRange');
            const previewElement = document.getElementById('pageRangePreview');
            const pageRange = pageRangeInput.value.trim();
            
            if (!pageRange) {
                previewElement.textContent = 'All pages will be processed';
                return;
            }
            
            // Validate page range format
            const isValid = /^(\d+(-\d+)?)(,\s*\d+(-\d+)?)*$/.test(pageRange);
            
            if (isValid) {
                previewElement.textContent = `Pages to process: ${pageRange}`;
            } else {
                previewElement.textContent = 'Invalid page range format. Use format like "1-5, 8, 11-13"';
            }
        }

        // Format label text
        function formatLabel(text) {
            return text.charAt(0).toUpperCase() + text.slice(1).replace(/([A-Z])/g, ' $1').replace(/_/g, ' ');
        }

        // Reset tool modal
        function resetToolModal() {
            document.getElementById('fileList').style.display = 'none';
            document.getElementById('fileItems').innerHTML = '';
            document.getElementById('progressContainer').style.display = 'none';
            document.getElementById('progressFill').style.width = '0%';
            document.getElementById('processBtn').disabled = true;
            document.getElementById('processBtnText').textContent = 'Select Files to Continue';
            
            // Remove any existing download area
            const existingDownloadArea = document.querySelector('.download-area');
            if (existingDownloadArea) {
                existingDownloadArea.remove();
            }
            
            // Reset upload area
            const uploadArea = document.getElementById('uploadArea');
            uploadArea.classList.remove('dragover');
        }

        // Handle file selection
        function handleFileSelect(event) {
            const files = Array.from(event.target.files);
            addFiles(files);
        }

        // Handle drag over
        function handleDragOver(event) {
            event.preventDefault();
            event.currentTarget.classList.add('dragover');
        }

        // Handle drag leave
        function handleDragLeave(event) {
            event.preventDefault();
            event.currentTarget.classList.remove('dragover');
        }

        // Handle drop
        function handleDrop(event) {
            event.preventDefault();
            event.currentTarget.classList.remove('dragover');
            
            const files = Array.from(event.dataTransfer.files);
            addFiles(files);
        }

        // Add files to the list
        function addFiles(files) {
            const validFiles = files.filter(file => {
                if (currentTool.acceptedTypes) {
                    const extension = '.' + file.name.split('.').pop().toLowerCase();
                    return currentTool.acceptedTypes.includes(extension);
                } else {
                    return file.type === 'application/pdf' || file.name.toLowerCase().endsWith('.pdf');
                }
            });

            if (validFiles.length === 0) {
                showNotification('Please select valid files for this tool.', 'error');
                return;
            }

            selectedFiles = [...selectedFiles, ...validFiles];
            renderFileList();
            updateProcessButton();
        }

        // Render file list
        function renderFileList() {
            const fileList = document.getElementById('fileList');
            const fileItems = document.getElementById('fileItems');
            
            fileList.style.display = 'block';
            fileItems.innerHTML = '';
            
            selectedFiles.forEach((file, index) => {
                const fileItem = document.createElement('div');
                fileItem.className = 'file-item';
                fileItem.innerHTML = `
                    <div class="file-info">
                        <div class="file-icon">
                            <i class="${getFileIcon(file)}"></i>
                        </div>
                        <div class="file-details">
                            <h4>${file.name}</h4>
                            <p>${formatFileSize(file.size)}</p>
                        </div>
                    </div>
                    <div class="file-actions">
                        <button class="btn btn-danger btn-sm" onclick="removeFile(${index})">
                            <i class="fas fa-trash"></i>
                        </button>
                    </div>
                `;
                fileItems.appendChild(fileItem);
            });
        }

        // Get file icon
        function getFileIcon(file) {
            const extension = file.name.split('.').pop().toLowerCase();
            const iconMap = {
                'pdf': 'fas fa-file-pdf',
                'doc': 'fas fa-file-word',
                'docx': 'fas fa-file-word',
                'xls': 'fas fa-file-excel',
                'xlsx': 'fas fa-file-excel',
                'ppt': 'fas fa-file-powerpoint',
                'pptx': 'fas fa-file-powerpoint',
                'jpg': 'fas fa-file-image',
                'jpeg': 'fas fa-file-image',
                'png': 'fas fa-file-image',
                'gif': 'fas fa-file-image',
                'bmp': 'fas fa-file-image'
            };
            return iconMap[extension] || 'fas fa-file';
        }

        // Format file size
        function formatFileSize(bytes) {
            if (bytes === 0) return '0 Bytes';
            const k = 1024;
            const sizes = ['Bytes', 'KB', 'MB', 'GB'];
            const i = Math.floor(Math.log(bytes) / Math.log(k));
            return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];
        }

        // Remove file
        function removeFile(index) {
            selectedFiles.splice(index, 1);
            renderFileList();
            updateProcessButton();
            
            if (selectedFiles.length === 0) {
                document.getElementById('fileList').style.display = 'none';
            }
        }

        // Update process button
        function updateProcessButton() {
            const processBtn = document.getElementById('processBtn');
            const processBtnText = document.getElementById('processBtnText');
            
            if (selectedFiles.length > 0) {
                processBtn.disabled = false;
                processBtnText.textContent = `Process ${selectedFiles.length} File${selectedFiles.length > 1 ? 's' : ''}`;
            } else {
                processBtn.disabled = true;
                processBtnText.textContent = 'Select Files to Continue';
            }
        }

        // Process files
        async function processFiles() {
            if (isProcessing || selectedFiles.length === 0) return;
            
            isProcessing = true;
            const processBtn = document.getElementById('processBtn');
            const processBtnText = document.getElementById('processBtnText');
            const progressContainer = document.getElementById('progressContainer');
            const progressFill = document.getElementById('progressFill');
            const progressText = document.getElementById('progressText');
            
            // Update UI
            processBtn.disabled = true;
            processBtnText.innerHTML = '<span class="loading"></span> Processing...';
            progressContainer.style.display = 'block';
            
            try {
                // Collect options
                const options = collectToolOptions();
                
                // Process files based on current tool
                switch (currentTool.id) {
                    case 'merge-pdf':
                        processedPDF = await mergePDFs(selectedFiles, options);
                        break;
                    case 'split-pdf':
                        processedPDF = await splitPDF(selectedFiles[0], options);
                        break;
                    case 'compress-pdf':
                        processedPDF = await compressPDF(selectedFiles[0], options);
                        break;
                    case 'protect-pdf':
                        processedPDF = await protectPDF(selectedFiles[0], options);
                        break;
                    case 'rotate-pdf':
                        processedPDF = await rotatePDF(selectedFiles[0], options);
                        break;
                    case 'organize-pdf':
                        processedPDF = await organizePDF(selectedFiles[0], options);
                        break;
                    case 'pdf-to-word':
                    case 'pdf-to-excel':
                    case 'pdf-to-ppt':
                    case 'pdf-to-jpg':
                        showNotification('Conversion to other formats requires server-side processing. This is a demo.', 'info');
                        processedPDF = selectedFiles[0]; // Just use original for demo
                        break;
                    case 'word-to-pdf':
                    case 'excel-to-pdf':
                    case 'ppt-to-pdf':
                    case 'jpg-to-pdf':
                        showNotification('Conversion from other formats requires server-side processing. This is a demo.', 'info');
                        processedPDF = selectedFiles[0]; // Just use original for demo
                        break;
                    default:
                        processedPDF = selectedFiles[0]; // Default to first file
                }
                
                // Generate download links
                generateDownloadLinks();
                
                showNotification('Files processed successfully!', 'success');
            } catch (error) {
                console.error('Processing error:', error);
                showNotification('Error processing files: ' + error.message, 'error');
            } finally {
                isProcessing = false;
                processBtn.disabled = false;
                processBtnText.textContent = 'Process Complete';
            }
        }

        // Collect tool options
        function collectToolOptions() {
            const options = {};
            const toolOptionsElement = document.getElementById('toolOptions');
            
            if (toolOptionsElement.style.display !== 'none') {
                const inputs = toolOptionsElement.querySelectorAll('input, select');
                inputs.forEach(input => {
                    if (input.type === 'checkbox') {
                        options[input.name] = input.checked;
                    } else if (input.type === 'number') {
                        options[input.name] = parseInt(input.value);
                    } else {
                        options[input.name] = input.value;
                    }
                });
            }
            
            return options;
        }

        // Merge PDFs
        async function mergePDFs(files, options) {
            const { PDFDocument } = PDFLib;
            const mergedPdf = await PDFDocument.create();
            
            // Update progress
            updateProgress(10, 'Loading PDFs...');
            
            // Load all PDFs
            const pdfs = [];
            for (let i = 0; i < files.length; i++) {
                const file = files[i];
                const arrayBuffer = await file.arrayBuffer();
                const pdfDoc = await PDFDocument.load(arrayBuffer);
                pdfs.push(pdfDoc);
                updateProgress(10 + (i / files.length) * 60, `Processing PDF ${i + 1} of ${files.length}`);
            }
            
            // Copy pages
            for (const pdfDoc of pdfs) {
                const pages = await mergedPdf.copyPages(pdfDoc, pdfDoc.getPageIndices());
                pages.forEach(page => mergedPdf.addPage(page));
            }
            
            updateProgress(90, 'Finalizing merged PDF...');
            
            // Save merged PDF
            const mergedPdfBytes = await mergedPdf.save();
            
            updateProgress(100, 'Merge complete!');
            
            return new Blob([mergedPdfBytes], { type: 'application/pdf' });
        }

        // Split PDF
        async function splitPDF(file, options) {
            const { PDFDocument } = PDFLib;
            const arrayBuffer = await file.arrayBuffer();
            const pdfDoc = await PDFDocument.load(arrayBuffer);
            const pageCount = pdfDoc.getPageCount();
            
            updateProgress(10, 'Loading PDF...');
            
            // Parse page range
            let pagesToExtract = [];
            if (options.splitMode === 'range' && options.pageRange) {
                pagesToExtract = parsePageRange(options.pageRange, pageCount);
            } else if (options.splitMode === 'pages') {
                // Extract all pages as individual files
                pagesToExtract = Array.from({ length: pageCount }, (_, i) => [i]);
            } else {
                // Default: extract all pages as one file (same as original)
                pagesToExtract = [Array.from({ length: pageCount }, (_, i) => i)];
            }
            
            updateProgress(30, 'Splitting pages...');
            
            // Create a new PDF for each range
            const splitPdfs = [];
            for (let i = 0; i < pagesToExtract.length; i++) {
                const pageIndices = pagesToExtract[i];
                const newPdf = await PDFDocument.create();
                
                for (const pageIndex of pageIndices) {
                    const [copiedPage] = await newPdf.copyPages(pdfDoc, [pageIndex]);
                    newPdf.addPage(copiedPage);
                }
                
                const pdfBytes = await newPdf.save();
                splitPdfs.push(new Blob([pdfBytes], { type: 'application/pdf' }));
                
                updateProgress(30 + (i / pagesToExtract.length) * 60, `Processing split ${i + 1} of ${pagesToExtract.length}`);
            }
            
            updateProgress(100, 'Split complete!');
            
            // For demo purposes, we'll just return the first split
            // In a real app, you'd handle multiple files differently
            return splitPdfs[0];
        }

        // Parse page range string (e.g., "1-5, 8, 11-13")
        function parsePageRange(rangeStr, maxPages) {
            const ranges = rangeStr.split(',');
            const pages = new Set();
            
            for (const range of ranges) {
                const trimmed = range.trim();
                if (!trimmed) continue;
                
                if (trimmed.includes('-')) {
                    const [start, end] = trimmed.split('-').map(Number);
                    const actualStart = Math.max(1, start);
                    const actualEnd = Math.min(maxPages, end || start);
                    
                    for (let i = actualStart; i <= actualEnd; i++) {
                        pages.add(i - 1); // Convert to 0-based index
                    }
                } else {
                    const pageNum = Number(trimmed);
                    if (pageNum >= 1 && pageNum <= maxPages) {
                        pages.add(pageNum - 1); // Convert to 0-based index
                    }
                }
            }
            
            // Convert to array of arrays for splitting
            return [[...pages]];
        }

        // Compress PDF
        async function compressPDF(file, options) {
            // Note: PDF-lib doesn't support actual compression, this is just a demo
            const { PDFDocument } = PDFLib;
            const arrayBuffer = await file.arrayBuffer();
            
            updateProgress(10, 'Loading PDF...');
            
            const pdfDoc = await PDFDocument.load(arrayBuffer);
            
            updateProgress(50, 'Optimizing PDF...');
            
            // In a real app, you would apply actual compression here
            // For demo purposes, we'll just re-save the PDF
            const pdfBytes = await pdfDoc.save({
                useObjectStreams: true,
                // These options would affect compression in a real implementation
                // but PDF-lib doesn't actually compress the content
            });
            
            updateProgress(100, 'Compression complete!');
            
            return new Blob([pdfBytes], { type: 'application/pdf' });
        }

        // Protect PDF with password
        async function protectPDF(file, options) {
            const { PDFDocument } = PDFLib;
            const arrayBuffer = await file.arrayBuffer();
            
            updateProgress(10, 'Loading PDF...');
            
            const pdfDoc = await PDFDocument.load(arrayBuffer);
            
            updateProgress(50, 'Applying protection...');
            
            // Note: PDF-lib doesn't support actual encryption, this is just a demo
            // In a real app, you would use a library that supports PDF encryption
            const pdfBytes = await pdfDoc.save();
            
            updateProgress(100, 'Protection applied!');
            
            showNotification('Password protection requires server-side processing in a real implementation', 'info');
            return new Blob([pdfBytes], { type: 'application/pdf' });
        }

        // Rotate PDF pages
        async function rotatePDF(file, options) {
            const { PDFDocument, degrees } = PDFLib;
            const arrayBuffer = await file.arrayBuffer();
            
            updateProgress(10, 'Loading PDF...');
            
            const pdfDoc = await PDFDocument.load(arrayBuffer);
            const pages = pdfDoc.getPages();
            
            updateProgress(30, 'Rotating pages...');
            
            const rotationAngle = parseInt(options.rotation) || 90;
            const direction = options.direction === 'counterclockwise' ? -1 : 1;
            const angle = degrees(rotationAngle * direction);
            
            pages.forEach(page => {
                page.setRotation(angle);
            });
            
            updateProgress(80, 'Saving rotated PDF...');
            
            const pdfBytes = await pdfDoc.save();
            
            updateProgress(100, 'Rotation complete!');
            
            return new Blob([pdfBytes], { type: 'application/pdf' });
        }

        // Organize PDF (reorder, delete pages)
        async function organizePDF(file, options) {
            const { PDFDocument } = PDFLib;
            const arrayBuffer = await file.arrayBuffer();
            
            updateProgress(10, 'Loading PDF...');
            
            const pdfDoc = await PDFDocument.load(arrayBuffer);
            const pageCount = pdfDoc.getPageCount();
            
            // For demo, we'll just reverse the pages
            // In a real app, you'd implement the actual organization logic
            const newPdf = await PDFDocument.create();
            const pageIndices = Array.from({ length: pageCount }, (_, i) => i);
            
            if (options.action === 'reorder') {
                pageIndices.reverse(); // Just reverse for demo
            } else if (options.action === 'delete') {
                // Delete every other page for demo
                for (let i = pageIndices.length - 1; i >= 0; i--) {
                    if (i % 2 === 0) pageIndices.splice(i, 1);
                }
            }
            
            updateProgress(40, 'Reorganizing pages...');
            
            for (const pageIndex of pageIndices) {
                const [copiedPage] = await newPdf.copyPages(pdfDoc, [pageIndex]);
                newPdf.addPage(copiedPage);
            }
            
            updateProgress(80, 'Saving organized PDF...');
            
            const pdfBytes = await newPdf.save();
            
            updateProgress(100, 'Organization complete!');
            
            return new Blob([pdfBytes], { type: 'application/pdf' });
        }

        // Update progress bar
        function updateProgress(percent, message) {
            const progressFill = document.getElementById('progressFill');
            const progressText = document.getElementById('progressText');
            
            progressFill.style.width = percent + '%';
            progressText.textContent = message;
        }

        // Generate download links
        function generateDownloadLinks() {
            const processSection = document.querySelector('.process-section');
            
            // Remove existing download area if any
            const existingDownloadArea = document.querySelector('.download-area');
            if (existingDownloadArea) {
                existingDownloadArea.remove();
            }
            
            // Create download area
            const downloadArea = document.createElement('div');
            downloadArea.className = 'download-area';
            downloadArea.innerHTML = `
                <h3><i class="fas fa-check-circle" style="color: var(--success-color);"></i> Processing Complete!</h3>
                <p>Your files have been processed successfully.</p>
                <div style="margin-top: 1rem; display: flex; gap: 1rem; justify-content: center; flex-wrap: wrap;">
                    <button class="btn btn-primary" onclick="downloadProcessedFile()">
                        <i class="fas fa-download"></i> Download Processed File
                    </button>
                    <button class="btn btn-secondary" onclick="saveToCloud('google')">
                        <i class="fab fa-google-drive"></i> Save to Drive
                    </button>
                    <button class="btn btn-secondary" onclick="saveToCloud('dropbox')">
                        <i class="fab fa-dropbox"></i> Save to Dropbox
                    </button>
                    <button class="btn btn-outline" onclick="shareFiles()">
                        <i class="fas fa-share"></i> Share
                    </button>
                </div>
            `;
            
            processSection.appendChild(downloadArea);
        }

        // Download processed file
        function downloadProcessedFile() {
            if (!processedPDF) {
                showNotification('No processed file available', 'error');
                return;
            }
            
            const fileName = `processed_${currentTool.id}_${Date.now()}.pdf`;
            saveAs(processedPDF, fileName);
            showNotification('Download started!', 'success');
        }

        // Upload from cloud
        function uploadFromCloud(provider) {
            showNotification(`${provider === 'google' ? 'Google Drive' : 'Dropbox'} integration coming soon!`, 'info');
        }

        // Save to cloud
        function saveToCloud(provider) {
            showNotification(`Files will be saved to ${provider === 'google' ? 'Google Drive' : 'Dropbox'}`, 'success');
        }

        // Share files
        function shareFiles() {
            if (navigator.share) {
                navigator.share({
                    title: 'Processed PDF Files',
                    text: 'Check out these processed PDF files',
                    url: window.location.href
                });
            } else {
                // Fallback: copy link to clipboard
                navigator.clipboard.writeText(window.location.href);
                showNotification('Link copied to clipboard!', 'success');
            }
        }

        // Show notification
        function showNotification(message, type = 'info') {
            const notification = document.createElement('div');
            notification.className = `notification notification-${type}`;
            notification.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                padding: 1rem 1.5rem;
                border-radius: 8px;
                color: white;
                font-weight: 500;
                z-index: 9999;
                animation: slideIn 0.3s ease;
                max-width: 300px;
                box-shadow: 0 4px 12px rgba(0,0,0,0.15);
            `;
            
            const colors = {
                success: '#27ae60',
                error: '#e74c3c',
                warning: '#f39c12',
                info: '#3498db'
            };
            
            notification.style.backgroundColor = colors[type];
            notification.textContent = message;
            
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.remove();
            }, 4000);
        }

        // Close modal
        function closeModal(modalId) {
            document.getElementById(modalId).style.display = 'none';
        }

        // Auth functions
        function openAuthModal(mode) {
            const authModal = document.getElementById('authModal');
            const authModalTitle = document.getElementById('authModalTitle');
            const authSubmitText = document.getElementById('authSubmitText');
            const authToggleLink = document.getElementById('authToggleLink');
            const confirmPasswordGroup = document.getElementById('confirmPasswordGroup');
            
            if (mode === 'login') {
                authModalTitle.textContent = 'Login';
                authSubmitText.textContent = 'Login';
                authToggleLink.textContent = "Don't have an account? Sign up";
                confirmPasswordGroup.style.display = 'none';
            } else {
                authModalTitle.textContent = 'Sign Up';
                authSubmitText.textContent = 'Sign Up';
                authToggleLink.textContent = 'Already have an account? Login';
                confirmPasswordGroup.style.display = 'block';
            }
            
            authModal.style.display = 'block';
        }

        function toggleAuthMode() {
            const authModalTitle = document.getElementById('authModalTitle');
            const isLogin = authModalTitle.textContent === 'Login';
            openAuthModal(isLogin ? 'signup' : 'login');
        }

        function handleAuth(event) {
            event.preventDefault();
            const email = document.getElementById('email').value;
            const password = document.getElementById('password').value;
            const isLogin = document.getElementById('authModalTitle').textContent === 'Login';
            
            // Simulate authentication
            setTimeout(() => {
                currentUser = { email, name: email.split('@')[0] };
                updateAuthUI();
                closeModal('authModal');
                showNotification(`Successfully ${isLogin ? 'logged in' : 'signed up'}!`, 'success');
            }, 1000);
        }

        function updateAuthUI() {
            const authButtons = document.querySelector('.auth-buttons');
            if (currentUser) {
                authButtons.innerHTML = `
                    <span style="color: white; margin-right: 1rem;">Welcome, ${currentUser.name}!</span>
                    <button class="btn btn-outline" onclick="logout()">Logout</button>
                `;
            } else {
                authButtons.innerHTML = `
                    <a href="#" class="btn btn-outline" onclick="openAuthModal('login')">Login</a>
                    <a href="#" class="btn btn-white" onclick="openAuthModal('signup')">Sign Up</a>
                `;
            }
        }

        function logout() {
            currentUser = null;
            updateAuthUI();
            showNotification('Successfully logged out!', 'success');
        }

        function loadUserSession() {
            // Simulate loading user session
            // In a real app, you would check for stored tokens/sessions
            updateAuthUI();
        }

        // Smooth scrolling for navigation links
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (target) {
                    target.scrollIntoView({
                        behavior: 'smooth',
                        block: 'start'
                    });
                }
            });
        });

        // Add some CSS animations
        const style = document.createElement('style');
        style.textContent = `
            @keyframes slideIn {
                from { transform: translateX(100%); opacity: 0; }
                to { transform: translateX(0); opacity: 1; }
            }
            
            .notification-success { background-color: #27ae60 !important; }
            .notification-error { background-color: #e74c3c !important; }
            .notification-warning { background-color: #f39c12 !important; }
            .notification-info { background-color: #3498db !important; }
            
            .btn-secondary {
                background: #6c757d;
                color: white;
                border: none;
            }
            
            .btn-secondary:hover {
                background: #5a6268;
            }
        `;
        document.head.appendChild(style);

    </script>
</body>
</html>
